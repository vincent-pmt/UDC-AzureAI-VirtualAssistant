"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RpcMessageStreamProcessorLocalClient = void 0;
var tslib_1 = require("tslib");
var StreamingRpcClient_1 = require("./client/StreamingRpcClient");
var RpcMessageStreamProcessorLocalClient = (function (_super) {
    tslib_1.__extends(RpcMessageStreamProcessorLocalClient, _super);
    function RpcMessageStreamProcessorLocalClient(params) {
        var _this = _super.call(this, {
            send: function (messages) {
                Promise.resolve().then(function () {
                    _this.params.server.onMessages(messages, _this.params.ctx);
                });
            },
            bufferSize: 1,
            bufferTime: 0,
        }) || this;
        _this.params = params;
        _this.params.server.onSend = function (messages) {
            Promise.resolve().then(function () {
                _this.onMessages(messages);
            });
        };
        return _this;
    }
    return RpcMessageStreamProcessorLocalClient;
}(StreamingRpcClient_1.StreamingRpcClient));
exports.RpcMessageStreamProcessorLocalClient = RpcMessageStreamProcessorLocalClient;
